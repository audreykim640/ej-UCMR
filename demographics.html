<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Appendix B</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="demographics_files/libs/clipboard/clipboard.min.js"></script>
<script src="demographics_files/libs/quarto-html/quarto.js"></script>
<script src="demographics_files/libs/quarto-html/popper.min.js"></script>
<script src="demographics_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="demographics_files/libs/quarto-html/anchor.min.js"></script>
<link href="demographics_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="demographics_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="demographics_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="demographics_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="demographics_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Appendix B</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="appendix-b" class="level1">
<h1>Appendix B</h1>
<p>All code whose results are shown in the study. (This document is just for code transparency, not to display outputs from the code.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(performance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="joining-data" class="level2">
<h2 class="anchored" data-anchor-id="joining-data">Joining data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## -------SOURCING DATA--------</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variables from https://api.census.gov/data/2020/acs/acs5/groups.html</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>bg_shapes <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"block group"</span>, </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"B02001_001"</span>, <span class="st">"B02008_001"</span>, <span class="st">"B02009_001"</span>, <span class="st">"B02010_001"</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">"B02011_001"</span>, <span class="st">"B19013_001"</span>, <span class="st">"B03003_001"</span>, <span class="st">"B03003_003"</span>),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"CA"</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">cache_table =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">geometry =</span> <span class="cn">TRUE</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># CSV is too large to push -- download from https://www.epa.gov/dwucmr/occurrence-data-unregulated-contaminant-monitoring-rule#4</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>UCMR <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/UCMR4_All.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PWSName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Pala North"</span>, <span class="st">"Pauma"</span>, <span class="st">"Pechanga"</span>, <span class="st">"Redding Rancheria"</span>, </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Viejas Community System"</span>) <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"CA"</span>) </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>govwatershapes <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/SABL_Public_230403"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"PWSID"</span> <span class="ot">=</span> <span class="st">"SABL_PWSID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PWSID <span class="sc">%in%</span> <span class="fu">unique</span>(UCMR<span class="sc">$</span>PWSID)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">4269</span>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># .gpkg is too large to push -- download from https://github.com/SimpleLab-Inc/wsb</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>SLwatershapes <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/temm.gpkg"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://community.rstudio.com/t/how-to-open-a-geopackage-file/41027</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pwsid <span class="sc">%in%</span> <span class="fu">unique</span>(UCMR<span class="sc">$</span>PWSID))</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="do">## -------COMBINING CA PWS AND SIMPLELAB GEOMETRIES--------</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>missingPWSs <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">unique</span>(UCMR<span class="sc">$</span>PWSID), <span class="fu">unique</span>(govwatershapes<span class="sc">$</span>PWSID)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span> (x) {<span class="fu">ifelse</span>(<span class="fu">substr</span>(x,<span class="dv">1</span>,<span class="dv">1</span>) <span class="sc">==</span> <span class="st">"9"</span>, <span class="fu">paste0</span>(<span class="st">"0"</span>, x), x)}) </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>missingshapes <span class="ot">&lt;-</span> SLwatershapes <span class="sc">%&gt;%</span> </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pwsid <span class="sc">%in%</span> missingPWSs) <span class="sc">%&gt;%</span> </span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"PWSID"</span> <span class="ot">=</span> <span class="st">"pwsid"</span>,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>         <span class="st">"WATER_SY_1"</span> <span class="ot">=</span> <span class="st">"pws_name"</span>,</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>         <span class="st">"geometry"</span> <span class="ot">=</span> <span class="st">"geom"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PWSID, WATER_SY_1, geometry) <span class="sc">%&gt;%</span> </span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">4269</span>)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>PWS <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(missingshapes, govwatershapes)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="do">## ACS variable codes </span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="co"># B02001_001 Race total B02001_002 White alone\</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="co"># B02009_001 Black alone or in combination </span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="co"># B02010_001 Native American alone or in combination </span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a><span class="co"># B02011_001 Asian alone or in combination </span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Hispanic total: B03003_001 </span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="co"># B03003_003 yes hispanic or latino</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="do">## -------TRANSFORMING DEMOGRAPHICS DATA--------</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>bg_shapes_wide <span class="ot">&lt;-</span> bg_shapes <span class="sc">%&gt;%</span> </span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>moe) <span class="sc">%&gt;%</span> </span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"variable"</span>, <span class="at">values_from =</span> <span class="st">"estimate"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Total =</span> B02001_001,    </span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>         <span class="at">White =</span> B02008_001,    </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">Black =</span> B02009_001,</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>         <span class="at">Indigenous =</span> B02010_001,   </span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>         <span class="at">Asian =</span> B02011_001,</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>         <span class="at">Total_Hisp =</span> B03003_001,   </span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>         <span class="at">Hisp_Lat =</span> B03003_003,</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>         <span class="at">Med_Income =</span> B19013_001) <span class="co">#%&gt;% </span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate(White = White / Total,</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a><span class="co">#        Black = Black / Total,</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a><span class="co">#        Indigenous = Indigenous / Total,</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a><span class="co">#        Asian = Asian / Total,</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a><span class="co">#        Hisp_Lat = Hisp_Lat / Total_Hisp</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a><span class="co">#        )</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Save until after having joined since weighted averages won't work with props</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Want to use counts</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="co"># block_shapes_tall_props &lt;- block_shapes_wide %&gt;% </span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_longer(c(White, Black, Asian, Indigenous, Hisp_Lat), </span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a><span class="co">#                names_to = "race", values_to = "prop")</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(block_shapes_tall2, aes(x = race, y = prop, color = race)) + geom_col()</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a><span class="co"># block_shapes_vals &lt;- block_shapes %&gt;% </span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(!(Total == 0 &amp; Total_Hisp == 0))</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="do">## -------JOINING AND AVERAGING DEMOGRAPHICS--------</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a><span class="co"># below line sourced from https://github.com/r-spatial/sf/issues/493</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a><span class="fu">sf_use_s2</span>(<span class="cn">FALSE</span>) <span class="co"># flattens shapes</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a><span class="co"># join &lt;- watershapes %&gt;% </span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a><span class="co">#   inner_join(UCMR_CA, by = c("pwsid" = "PWSID")) %&gt;% </span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(pwsid, PWSName, primacy_agency_code, primary_source_code, tier, FacilityWaterType, CollectionDate, Contaminant, MRL, AnalyticalResultsSign, AnalyticalResultValue.µg.L.) %&gt;% </span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a><span class="co">#   st_intersection(bg_shapes) %&gt;% </span></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(pwi_county = paste0(pwsid, "-", GEOID))</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a><span class="co"># PWS_demos_joined &lt;- st_join(govwatershapes, bg_shapes_wide)</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>shape_intersections <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(PWS, bg_shapes_wide) <span class="sc">%&gt;%</span> </span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PWS_bg =</span> <span class="fu">paste0</span>(PWSID, <span class="st">"-"</span>, GEOID))</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>PWS_aw_demographics <span class="ot">&lt;-</span> shape_intersections <span class="sc">%&gt;%</span> </span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- get area ---#</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">area =</span> <span class="fu">as.numeric</span>(<span class="fu">st_area</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- get area-weight by HUC unit ---#</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> </span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> area <span class="sc">/</span> <span class="fu">sum</span>(area)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>  <span class="co">#--- calculate area-weighted corn acreage by HUC unit ---#</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'aw' stands for area-weighted </span></span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Total_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> Total),</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>            <span class="at">White_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> White),</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>            <span class="at">Black_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> Black),</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>            <span class="at">Indig_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> Indigenous),</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>            <span class="at">Asian_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> Asian),</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>            <span class="at">Total_HispLat_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> Total_Hisp),</span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>            <span class="at">HispLat_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> Hisp_Lat),</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>            <span class="at">MedIncome_aw =</span> <span class="fu">sum</span>(weight <span class="sc">*</span> Med_Income)</span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for posterity (to not have to rerun code)</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a><span class="co"># st_write(PWS_aw_demographics, dsn = 'data/joinedPWSdemos/joinedPWSdemos.shp')</span></span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a><span class="do">## -------WRANGLING DEMOGRAPHICS--------</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>PWSdemog <span class="ot">&lt;-</span> PWS_aw_demographics <span class="sc">%&gt;%</span> </span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">White_prop =</span> White_aw <span class="sc">/</span> Total_aw,</span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>         <span class="at">Black_prop =</span> Black_aw <span class="sc">/</span> Total_aw,</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>         <span class="at">Indig_prop =</span> Indig_aw <span class="sc">/</span> Total_aw,</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>         <span class="at">Asian_prop =</span> Asian_aw <span class="sc">/</span> Total_aw,</span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>         <span class="at">HispLat_prop =</span> HispLat_aw <span class="sc">/</span> Total_HispLat_aw)</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>PWSdemog <span class="ot">&lt;-</span> PWSdemog <span class="sc">%&gt;%</span> </span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> <span class="co"># max.col() couldn't work with </span></span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Predom =</span> <span class="fu">colnames</span>(.[<span class="dv">10</span><span class="sc">:</span><span class="dv">13</span>])[<span class="fu">max.col</span>(.[<span class="dv">10</span><span class="sc">:</span><span class="dv">13</span>])]) <span class="sc">%&gt;%</span> </span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>  <span class="co"># above line courtesy of https://stackoverflow.com/questions/17735859/for-each-row-return-the-column-name-of-the-largest-value</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(PWSdemog) <span class="sc">%&gt;%</span> </span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PWSID, MedIncome_aw, White_prop, Black_prop,</span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>         Indig_prop, Asian_prop, HispLat_prop, Predom)</span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a><span class="do">## -------JOINING W UCMR--------</span></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>contamsOfInterest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"germanium"</span>, <span class="st">"manganese"</span>, <span class="st">"HAA6Br"</span>, <span class="st">"HAA9"</span>)</span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>full <span class="ot">&lt;-</span> UCMR <span class="sc">%&gt;%</span> </span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PWSID, PWSName, Contaminant, AnalyticalResultsSign,</span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>         AnalyticalResultValue.µg.L.) <span class="sc">%&gt;%</span> </span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Contaminant <span class="sc">%in%</span> contamsOfInterest) <span class="sc">%&gt;%</span> </span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(PWSdemog) <span class="sc">%&gt;%</span> </span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(White_prop, Black_prop, Asian_prop, Indig_prop), </span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"RaceEth"</span>, <span class="at">values_to =</span> <span class="st">"Prop"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ContamLevel =</span> AnalyticalResultValue.µg.L.,</span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>         <span class="at">RelativetoMRL =</span> AnalyticalResultsSign,</span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>         <span class="at">MedIncome =</span> MedIncome_aw) <span class="sc">%&gt;%</span> </span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ContamLevel <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Predom =</span> <span class="fu">substr</span>(Predom, <span class="dv">1</span>, <span class="fu">nchar</span>(Predom)<span class="sc">-</span><span class="dv">5</span>),</span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>         <span class="at">RaceEth =</span> <span class="fu">substr</span>(RaceEth, <span class="dv">1</span>, <span class="fu">nchar</span>(RaceEth)<span class="sc">-</span><span class="dv">5</span>),</span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>         <span class="at">RaceEth =</span> <span class="fu">ifelse</span>(RaceEth <span class="sc">==</span> <span class="st">"Indig"</span>, <span class="st">"Indigenous"</span>, RaceEth),</span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>         <span class="at">RaceEth =</span> <span class="fu">ifelse</span>(RaceEth <span class="sc">==</span> <span class="st">"White"</span>, <span class="st">"white"</span>, RaceEth),</span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>         <span class="at">RaceEth =</span> <span class="fu">factor</span>(RaceEth),</span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>         <span class="at">Contaminant =</span> <span class="fu">ordered</span>(Contaminant, </span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>                              <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"germanium"</span>,<span class="st">"manganese"</span>, <span class="st">"HAA6Br"</span>, <span class="st">"HAA9"</span>)),</span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>         <span class="at">LogLevel =</span> <span class="fu">log10</span>(ContamLevel),</span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>         <span class="at">HLFiftyPer =</span> <span class="fu">ifelse</span>(HispLat_prop <span class="sc">&gt;=</span> <span class="fu">median</span>(HispLat_prop), <span class="st">"Above"</span>, <span class="st">"Below"</span>),</span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>         <span class="at">HLFiftyPer =</span> <span class="fu">factor</span>(HLFiftyPer, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Above"</span>, <span class="st">"Below"</span>))) </span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(full, <span class="st">"full.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Description of data joining: I began by filtering the public water system boundary data based on what was available in the UCMR data to pare down the spatial data to only what will be relevant for the analysis. Then, I joined it with the spatial demographics data from the American Community Survey. This join was via spatial joins, which are computationally expensive and slow. (Joining PWS and UCMR data would create a larger dataset, which would be even slower, so I started here.) Using the sf package, I found which block groups overlapped each PWS. Then for each PWS, I attributed a proportion (or weight) to each block group, representing how much of the PWS boundary it intersected with. For instance, if part of block group 1 covered a quarter of the PWS in question, block group 1 received a 0.25. Then, other block groups overlapping with the PWS are assigned corresponding weights for that PWS. It is feasible that block groups appear multiple times in the dataset, receiving weights for different PWSs that they overlap with. After finding the weights, the weight for block group 1’s overlap with the PWS in questions is multiplied by the race, ethnicity, and total respondent counts. This statistic by weight multiplication occurs for each PWS-block group intersection, with PWSs possibly having multiple entries if it overlaps with multiple block groups. Then, for each PWS, all of the weighted statistics for that PWS are added together to create a cumulative weighted average for each of the statistics. The result of this join is a dataframe with each PWS appearing once with spatial data and weighted average counts of Asian, Black, Indigenous, and white respondents as well as a weighted average total of respondents to the race question. Similarly, the data contains a weighted average count of Hispanic/Latin(o/a) respondents and a weighted average total count of respondents to the Hispanic/Latin(o/a) question. These weighted averages are often rough estimates, as they make the assumption that the distribution of counts is even and consistent throughout an area whereas in reality, it’s possible that people are not evenly distributed within an area. For instance, it’s possible that there exist no people in one particular overlapping part of a block group and PWS but the counts from that block group will still be weighted and attributed to that PWS. With this joined dataset, I performed some further data wrangling for later data analysis, including converting race/ethnicity counts to proportions to create more values that are more comparable across PWSs and creating a categorical variable that lists the race that makes up the greatest proportion of the population that a PWS serves (according to this data). I additionally siphoned ethnicity into a categorical variable indicating if a public water system is “Above” or “Below” the 50th percentile for proportion of Hispanic or Latino/a constituents. Then I joined this PWS-demographics dataset to the UCMR data using the dplyr package (like most of this data wrangling work).</p>
</section>
<section id="race-tests" class="level2">
<h2 class="anchored" data-anchor-id="race-tests">Race tests</h2>
<section id="racial-groupings-regressions" class="level3">
<h3 class="anchored" data-anchor-id="racial-groupings-regressions">Racial groupings regressions</h3>
<div class="cell">

</div>
<p>In the following analyses, I am mainly testing for the following hypotheses:</p>
<ul>
<li>Null hypothesis: The relationship between the amount of germanium in the water and proportion of race will NOT depend on (change with) the race.</li>
<li>Alternative hypothesis: The relationship between the amount of germanium in the water and proportion of race WILL depend on (change with) the race.</li>
</ul>
<p>The basic form of the output is</p>
<!-- ```{=tex} -->
<!-- \begin{split} -->
<!-- E( \operatorname{LogLevel} ) = &\alpha + \beta_{1}(\operatorname{Prop}) + \beta_{2}(\operatorname{RaceEth}_{\operatorname{Black}}) + \beta_{3}(\operatorname{RaceEth}_{\operatorname{Indig}}) + \beta_{4}(\operatorname{RaceEth}_{\operatorname{White}}) + \\ -->
<!-- & + \beta_{5}(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Black}}) + \beta_{6}(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Indig}}) + \beta_{7}(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{White}}) -->
<!-- \end{split} -->
<!-- ``` -->
<p>where <span class="math inline">\(\alpha\)</span> and the <span class="math inline">\(\beta\)</span>s are the values found from the regression, and each <span class="math inline">\(\operatorname{RaceEth}_{\operatorname{x}}\)</span> serves as an “on/off” switch where if the RaceEth variable is “x” (e.g., Black) at that time, the <span class="math inline">\(\operatorname{RaceEth}_{\operatorname{Black}}\)</span> will equal 1 and all others will equal 0, so the coefficients corresponding with Black will have an impact while the other coefficients will be “turned off”.</p>
<section id="germanium-levels-vs-race-served-by-pws-proportions" class="level4">
<h4 class="anchored" data-anchor-id="germanium-levels-vs-race-served-by-pws-proportions">Germanium levels vs Race served by PWS proportions</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>germanium <span class="ot">&lt;-</span> full <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Contaminant <span class="sc">==</span> <span class="st">"germanium"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(germanium, <span class="fu">aes</span>(<span class="at">x =</span> Prop, <span class="at">y =</span> LogLevel)) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"goldenrod"</span>) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> RaceEth, <span class="at">scale =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>germanium_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> Prop <span class="sc">*</span> RaceEth, <span class="at">data =</span> germanium)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(germanium_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ```{=tex} -->
<!-- \begin{split} -->
<!-- E( \operatorname{LogLevel} ) = &-0.056 + -0.80(\operatorname{Prop}) + -0.042(\operatorname{RaceEth}_{\operatorname{Black}}) + -0.052(\operatorname{RaceEth}_{\operatorname{Indig}}) + -0.47(\operatorname{RaceEth}_{\operatorname{White}}) \\ -->
<!-- & + 0.11(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Black}}) + -0.82(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Indig}}) + 1.3(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{White}}) -->
<!-- \end{split} -->
<!-- ``` -->
<p>Since the response variable here is the log (base-10) of the contaminant concentration, the coefficients are most interpretable when placed as the coefficent of 10 to undo the transformation. The baseline in this model is the proportion of Asian respondents, which observes a staistically significant (p-value <span class="math inline">\(\approx\)</span> 0) negative correlation with the level of germanium. According to this model for each each percent increase of Asian respondents, we would expect to observe, on average, the concentration of germanium in the water decrease by approximately 0.040 <span class="math inline">\(\mu\)</span>g/L. While the p-value is negligible, we cannot say that it equals zerol it is only very close.</p>
<p>For germanium, there appears to be sufficient evidence to reject the null hypothesis that the race does not have an impact on the relationship between proportion of race and concentration of the contaminant. Both white and Hispanic/Latino populations experience an increase in germanium concentration in water as the proportion of those races increase.</p>
<p>For each percent increase in the proportion of people that the water system being Hispanic/Latino, we would expect to observe, on average, the concentration of germanium in the water <em>increase</em> by (-4.016 + 5.688 <span class="math inline">\(\approx\)</span> ) 0.017 <span class="math inline">\(\mu\)</span>g/L. The rate of increase becomes (-4.016 + 5.999 <span class="math inline">\(\approx\)</span> ) 0.020 <span class="math inline">\(\mu\)</span>g/L for each percent increase in the proportion of served people being white.</p>
<p>The relationship between the proportions of Black and Indigenous populations and contaminant levels visually seems to observe a similar pattern demonstrated by Asian populations. Statistically, there is no evidence that there is difference in either slope or intercept for these three groups.</p>
</section>
<section id="manganese-levels-vs-race-served-by-pws-proportions" class="level4">
<h4 class="anchored" data-anchor-id="manganese-levels-vs-race-served-by-pws-proportions">Manganese levels vs Race served by PWS proportions</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>manganese <span class="ot">&lt;-</span> full <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Contaminant <span class="sc">==</span> <span class="st">"manganese"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(manganese, <span class="fu">aes</span>(<span class="at">x =</span> Prop, <span class="at">y =</span> LogLevel)) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"goldenrod"</span>) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> RaceEth, <span class="at">switch =</span> <span class="st">"both"</span>, <span class="at">scale =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>manganese_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> Prop <span class="sc">*</span> RaceEth, <span class="at">data =</span> manganese)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(manganese_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="haa6br-levels-vs-race-served-by-pws-proportions" class="level4">
<h4 class="anchored" data-anchor-id="haa6br-levels-vs-race-served-by-pws-proportions">HAA6Br levels vs Race served by PWS proportions</h4>
<!-- ```{=tex} -->
<!-- \begin{split} -->
<!-- E( \operatorname{LogLevel} ) = &0.42 + -0.19(\operatorname{Prop}) + -0.047(\operatorname{RaceEth}_{\operatorname{Black}}) + -0.027(\operatorname{RaceEth}_{\operatorname{Indig}}) + 0.0023(\operatorname{RaceEth}_{\operatorname{White}}) \\ -->
<!-- & + 0.45(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Black}}) + 0.066(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Indig}}) + 0.14(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{White}}) -->
<!-- \end{split} -->
<!-- ``` -->
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>HAA6Br <span class="ot">&lt;-</span> full <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Contaminant <span class="sc">==</span> <span class="st">"HAA6Br"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(HAA6Br, <span class="fu">aes</span>(<span class="at">x =</span> Prop, <span class="at">y =</span> LogLevel)) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"goldenrod"</span>) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> RaceEth, <span class="at">scale =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>HAA6Br_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> Prop <span class="sc">*</span> RaceEth, <span class="at">data =</span> HAA6Br)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(HAA6Br_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="haa9-levels-vs-race-served-by-pws-proportions" class="level4">
<h4 class="anchored" data-anchor-id="haa9-levels-vs-race-served-by-pws-proportions">HAA9 levels vs Race served by PWS proportions</h4>
<!-- ```{=tex} -->
<!-- \begin{split} -->
<!-- E( \operatorname{LogLevel} ) = &0.68 + -0.35(\operatorname{Prop}) + -0.087(\operatorname{RaceEth}_{\operatorname{Black}}) + -0.047(\operatorname{RaceEth}_{\operatorname{Indig}}) + -0.26(\operatorname{RaceEth}_{\operatorname{White}}) \\ -->
<!-- & + 0.71(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Black}}) + -0.47(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Indig}}) + 0.66(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{White}}) -->
<!-- \end{split} -->
<!-- ``` -->
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>HAA9 <span class="ot">&lt;-</span> full <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Contaminant <span class="sc">==</span> <span class="st">"HAA9"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(HAA9, <span class="fu">aes</span>(<span class="at">x =</span> Prop, <span class="at">y =</span> LogLevel)) <span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"goldenrod"</span>) <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> RaceEth, <span class="at">switch =</span> <span class="st">"both"</span>, <span class="at">scale =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>HAA9_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> Prop <span class="sc">*</span> RaceEth, <span class="at">data =</span> HAA9)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(HAA9_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ```{=tex} -->
<!-- \begin{split} -->
<!-- E( \operatorname{LogLevel} ) = &1.0 + 0.029(\operatorname{Prop}) + 0.015(\operatorname{RaceEth}_{\operatorname{Black}}) + -0.030(\operatorname{RaceEth}_{\operatorname{Indig}}) + -0.28(\operatorname{RaceEth}_{\operatorname{White}}) \\ -->
<!-- & + -0.18(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Black}}) + -1.7(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{Indig}}) + 0.41(\operatorname{Prop} \times \operatorname{RaceEth}_{\operatorname{White}}) -->
<!-- \end{split} -->
<!-- ``` -->
</section>
</section>
<section id="race-kruskal-wallis-tests" class="level3">
<h3 class="anchored" data-anchor-id="race-kruskal-wallis-tests">Race Kruskal-Wallis tests</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(full, <span class="fu">aes</span>(<span class="at">x =</span> Predom, <span class="at">y =</span> ContamLevel)) <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"goldenrod"</span>) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Contaminant) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contaminant concentrations by predominant race"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Note: y-axis is log-adjusted"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Predominant racial group"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Contaminant level (\u03bcg/L)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> Predom, <span class="at">data =</span> manganese <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> Predom, <span class="at">data =</span> germanium <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> Predom, <span class="at">data =</span> HAA6Br <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> Predom, <span class="at">data =</span> HAA9 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="ethnicity-tests" class="level2">
<h2 class="anchored" data-anchor-id="ethnicity-tests">Ethnicity tests</h2>
<section id="ethnicity-kruskal-wallis" class="level3">
<h3 class="anchored" data-anchor-id="ethnicity-kruskal-wallis">Ethnicity Kruskal-Wallis</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(full, <span class="fu">aes</span>(<span class="at">x =</span> HLFiftyPer, <span class="at">y =</span> ContamLevel)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"goldenrod"</span>) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Contaminant) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contaminant concentrations by Hispanic/Latin(o/a) percentile"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Note: y-axis is log-adjusted"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Hispanic/Latin(o/a) proportion relative to 50th percentile"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Contaminant level (\u03bcg/L)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> HLFiftyPer, <span class="at">data =</span> germanium <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> HLFiftyPer, <span class="at">data =</span> manganese <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> HLFiftyPer, <span class="at">data =</span> HAA6Br <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(ContamLevel <span class="sc">~</span> HLFiftyPer, <span class="at">data =</span> HAA9 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PWSID) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ethnicity-linear-regressions" class="level3">
<h3 class="anchored" data-anchor-id="ethnicity-linear-regressions">Ethnicity linear regressions</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(full, <span class="fu">aes</span>(<span class="at">x =</span> HispLat_prop, <span class="at">y =</span> LogLevel)) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"goldenrod"</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Contaminant) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contaminant concentrations by proportion of Hispanic/Latin(o/a)"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Proportion of Hispanic/Latin(o/a) constituents"</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Concentration (log-transformed \u03bcg/L)"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>germanium_model_eth <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> HispLat_prop, <span class="at">data =</span> germanium)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(germanium_model_eth)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>manganese_model_eth <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> HispLat_prop, <span class="at">data =</span> manganese)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(manganese_model_eth)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>HAA6Br_model_eth <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> HispLat_prop, <span class="at">data =</span> HAA6Br)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(HAA6Br_model_eth)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>HAA9_model_eth <span class="ot">&lt;-</span> <span class="fu">glm</span>(LogLevel <span class="sc">~</span> HispLat_prop, <span class="at">data =</span> HAA9)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(HAA9_model_eth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>